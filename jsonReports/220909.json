{"id":220909,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8yMjA5MDk=","url":"https://hackerone.com/reports/220909","title":"Autoclose can close any task regardless of policies/spaces","state":"Closed","substate":"resolved","readable_substate":"Resolved","created_at":"2017-04-14T03:03:43.117Z","submitted_at":"2017-04-14T03:03:43.117Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"almanac","url":"/almanac","profile_picture_urls":{"small":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":18,"url":"https://hackerone.com/phabricator","handle":"phabricator","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/000/018/61446f7e6f0684c8c9f7c36c918b7ecd58183588_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/018/61446f7e6f0684c8c9f7c36c918b7ecd58183588_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Phabricator","twitter_handle":"phabricator","website":"http://phacility.com/phabricator/","about":"Phabricator is a collection of open source web applications that help software companies build better software."}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2017-04-24T04:20:25.148Z","bug_reporter_agreed_on_going_public_at":"2017-04-24T04:20:25.097Z","team_member_agreed_on_going_public_at":"2017-04-15T12:13:35.457Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"# Description\n\nIf a user can push to a repository that has autoclose enabled, they can close //any// Maniphest task on the install, including tasks whose policies otherwise restrict the user from viewing or editing, and tasks inside Spaces that the user can't view.\n\nI don't think this rises to the level of \"security vulnerability.\" In particular, I don't think this is an issue on installs that operate like the upstream, where the repositories and projects are all related, and the developers who can push to the repositories are trusted throughout the install. On my install, though, the users are multiple, disparate teams who want to restrict access from each other, and they shouldn't be able to close each other's tickets. The only reason I'm filing here instead of as a normal bug report is so that in case there are other installs like mine, the issue doesn't become public before Phacility has a chance to review it.\n\n# Steps to Reproduce\n\nThese steps involve an administrator and two users, Alice and Eve.\n\n1. As an administrator:\n  1. Create a repository R and configure it so that it's Visible To, Editable By, and Pushable By Eve, and Autoclose is On. OR Configure Diffusion's policies, setting the Default Edit Policy and Can Create Repositories to All Users.\n  1. (Optional) Create a Space S, and make it visible to only Alice.\n1. As Alice:\n  1. Create a Maniphest task T. Set policies so it's Visible To and Editable By only Alice. If the administrator created Space S, then also make the task visible to Space S instead of the default space.\n1. As Eve:\n  1. Confirm that task T is not visible.\n  1. If the administrator created repository R, then clone it. If instead the administrator configured Diffusion to allow anyone to create repositories, then create a new repository R with Autoclose turned On, and clone it.\n  1. Commit something. The author can be anyone and doesn't need to be a Phabricator user. In the commit message, write something about a mongoose, and use autoclose syntax to close task T.\n  1. Push the commit.\n1. As Alice again:\n  1. Confirm that task T has been closed despite policies and restricted spaces.\n  1. Hunt down and destroy Eve. (Being hunted down and destroyed is probably a security vulnerability?)\n\n# Versions\n\nI reproduced this on a test instance on Phacility with the following versions:\n\n* **phabricator:** 699ab153e3751e5389c69db4387d261e358de290 (Fri, Apr 7) (branched from 7707685733d26bf1c7278a2f338416a038c2709b on origin)\n* **arcanist:** 3512c4ab86d66a103a6733a0589177f93b6d6811 (Fri, Apr 7) (branched from a59cfca5f190c44403dfc7449c678a2aa1626bb4 on origin)\n* **phutil:** f568eb7b9542259cd3c0dcb3405cc9a83c90a2f5 (Mon, Apr 3) (branched from c581e769f10c6d2b427900897edba74e01a572bd on origin)\n* **libcore:** 3eebdfca5b325792fdd2003a261e1ab94b919322 (Fri, Mar 24)\n* **services:** 198eb67bd82296b6938d038836c7269c84bad98f (Feb 13 2017) (branched from 772620edd80ce593b104dba7721db42b9eb020a2 on origin)\n\n","vulnerability_information_html":"\u003ch1 id=\"description\"\u003eDescription\u003c/h1\u003e\n\n\u003cp\u003eIf a user can push to a repository that has autoclose enabled, they can close //any// Maniphest task on the install, including tasks whose policies otherwise restrict the user from viewing or editing, and tasks inside Spaces that the user can\u0026#39;t view.\u003c/p\u003e\n\n\u003cp\u003eI don\u0026#39;t think this rises to the level of \u0026quot;security vulnerability.\u0026quot; In particular, I don\u0026#39;t think this is an issue on installs that operate like the upstream, where the repositories and projects are all related, and the developers who can push to the repositories are trusted throughout the install. On my install, though, the users are multiple, disparate teams who want to restrict access from each other, and they shouldn\u0026#39;t be able to close each other\u0026#39;s tickets. The only reason I\u0026#39;m filing here instead of as a normal bug report is so that in case there are other installs like mine, the issue doesn\u0026#39;t become public before Phacility has a chance to review it.\u003c/p\u003e\n\n\u003ch1 id=\"steps-to-reproduce\"\u003eSteps to Reproduce\u003c/h1\u003e\n\n\u003cp\u003eThese steps involve an administrator and two users, Alice and Eve.\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eAs an administrator:\n\n\u003col\u003e\n\u003cli\u003eCreate a repository R and configure it so that it\u0026#39;s Visible To, Editable By, and Pushable By Eve, and Autoclose is On. OR Configure Diffusion\u0026#39;s policies, setting the Default Edit Policy and Can Create Repositories to All Users.\u003c/li\u003e\n\u003cli\u003e(Optional) Create a Space S, and make it visible to only Alice.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eAs Alice:\n\n\u003col\u003e\n\u003cli\u003eCreate a Maniphest task T. Set policies so it\u0026#39;s Visible To and Editable By only Alice. If the administrator created Space S, then also make the task visible to Space S instead of the default space.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eAs Eve:\n\n\u003col\u003e\n\u003cli\u003eConfirm that task T is not visible.\u003c/li\u003e\n\u003cli\u003eIf the administrator created repository R, then clone it. If instead the administrator configured Diffusion to allow anyone to create repositories, then create a new repository R with Autoclose turned On, and clone it.\u003c/li\u003e\n\u003cli\u003eCommit something. The author can be anyone and doesn\u0026#39;t need to be a Phabricator user. In the commit message, write something about a mongoose, and use autoclose syntax to close task T.\u003c/li\u003e\n\u003cli\u003ePush the commit.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eAs Alice again:\n\n\u003col\u003e\n\u003cli\u003eConfirm that task T has been closed despite policies and restricted spaces.\u003c/li\u003e\n\u003cli\u003eHunt down and destroy Eve. (Being hunted down and destroyed is probably a security vulnerability?)\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch1 id=\"versions\"\u003eVersions\u003c/h1\u003e\n\n\u003cp\u003eI reproduced this on a test instance on Phacility with the following versions:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003ephabricator:\u003c/strong\u003e 699ab153e3751e5389c69db4387d261e358de290 (Fri, Apr 7) (branched from 7707685733d26bf1c7278a2f338416a038c2709b on origin)\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003earcanist:\u003c/strong\u003e 3512c4ab86d66a103a6733a0589177f93b6d6811 (Fri, Apr 7) (branched from a59cfca5f190c44403dfc7449c678a2aa1626bb4 on origin)\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003ephutil:\u003c/strong\u003e f568eb7b9542259cd3c0dcb3405cc9a83c90a2f5 (Mon, Apr 3) (branched from c581e769f10c6d2b427900897edba74e01a572bd on origin)\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003elibcore:\u003c/strong\u003e 3eebdfca5b325792fdd2003a261e1ab94b919322 (Fri, Mar 24)\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eservices:\u003c/strong\u003e 198eb67bd82296b6938d038836c7269c84bad98f (Feb 13 2017) (branched from 772620edd80ce593b104dba7721db42b9eb020a2 on origin)\u003c/li\u003e\n\u003c/ul\u003e\n","original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2017-05-15T12:13:35.507Z","allow_singular_disclosure_after":-114367591.50435695,"singular_disclosure_allowed":true,"vote_count":3,"voters":["muhammad_uwais","eveeez","spetr0x"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":1611338,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hrrm, I think this is a little tricky.\n\nWe can't actually authoritatively tell who authored commits, since we identify authors from the author/committer metadata in the commit itself, which clients are free to rewrite. So if we added a rule about this (\"if commit X is authored by user Y, it can only affect tasks user Y can see\"), Eve could just look up one of Alice's commits, use `git commit --amend --author alice ...` to forge Alice's identity, then push the \"poisoned\" commit to affect the task.\n\nAlthough we can authoritatively identify the *pusher* in the case of hosted repositories, they often aren't the right user to really act as (since you can push commits on behalf of others, and some workflows do this routinely) and many repositories are observed rather than hosted, so we have no clue whose authority commits appeared under (unless GPG is in use, I suppose, although we don't currently support this and haven't seen much interest in it).\n\nI think we probably should respect visibility rules in cases where we can identify an author. Although this doesn't do anything for security, it would limit the impact of mistakes (where someone innocently types the wrong task number in `Fixes XXX`, and a task they can't see gets closed).\n\nI'm *inclined* to continue letting commits we can't attribute to an author close anything, since malicious interaction through this mechanism seems less pretty low-impact, but it's nice if `Fixes XXX` works when you're first setting things up even if your email/author strings aren't all sorted out yet.\n\nIn the context of your own install, would that be a satisfactory fix? Did you run into this because someone made an innocent mistake with the wrong `Fixes XXX`, but had author information configured correctly so that this rule would have prevented this mistake?\n\nSome stronger rules I can imagine are:\n\n- Unattributed commits can't affect anything. I think this is reasonable, but worry it might make the new user experience worse to fix a tiny/mostly theoretical issue with very little meaningful impact.\n- Unattributed commits can't affect things outside the default space. I don't like this because it's weird magic that makes the policy system more complicated with an unintuitive one-off rule.\n- Repositories (or an entire install) can be configured so that unattributed commits can't affect anything. If it's per-repository, this doesn't help with the case where Eve can create her own repository. I tend not to like this because options/settings have a high cost and I think the benefit here is very low (see also: \u003chttps://secure.phabricator.com/T8227\u003e).\n- Repositories (or an entre install) can be configured to require GPG signatures, and only act with authority if they're present. I think this is the best actual fix but I can't imagine anyone ever going to this trouble just to prevent this. This would be more reasonable if we had a stronger set of arguments and use cases for trying to support GPG or some other signing mechanism more broadly.\n- We could alternatively work to try to implicitly establish authority through other channels. For example, `arc land` could make an authorized call to Phabricator and say \"I'm Alice, and I'm pushing these commits, so if you later see them and they say they're from me, that's legitimate\". This would possibly let us get some of the benefits of GPG without requiring everyone to configure GPG.\n\nFor now, my inclination is to add the advisory/guard-rail rule (\"if commit X is attributed to author A, it can't affect tasks that author A doesn't have permission to see and edit\"), but not meaningfully try to defuse the \"attack\" part of this where Eve intentionally impersonates Alice.\n\nI don't think GPG or other side-channel authorization are unreasonable, they're currently just a lot of work for both the upstream and users for not much benefit. If/when we have more/better reasons to build them, we could integrate them here at that time.","markdown_message":"\u003cp\u003eHrrm, I think this is a little tricky.\u003c/p\u003e\n\n\u003cp\u003eWe can\u0026#39;t actually authoritatively tell who authored commits, since we identify authors from the author/committer metadata in the commit itself, which clients are free to rewrite. So if we added a rule about this (\u0026quot;if commit X is authored by user Y, it can only affect tasks user Y can see\u0026quot;), Eve could just look up one of Alice\u0026#39;s commits, use \u003ccode\u003egit commit --amend --author alice ...\u003c/code\u003e to forge Alice\u0026#39;s identity, then push the \u0026quot;poisoned\u0026quot; commit to affect the task.\u003c/p\u003e\n\n\u003cp\u003eAlthough we can authoritatively identify the \u003cem\u003epusher\u003c/em\u003e in the case of hosted repositories, they often aren\u0026#39;t the right user to really act as (since you can push commits on behalf of others, and some workflows do this routinely) and many repositories are observed rather than hosted, so we have no clue whose authority commits appeared under (unless GPG is in use, I suppose, although we don\u0026#39;t currently support this and haven\u0026#39;t seen much interest in it).\u003c/p\u003e\n\n\u003cp\u003eI think we probably should respect visibility rules in cases where we can identify an author. Although this doesn\u0026#39;t do anything for security, it would limit the impact of mistakes (where someone innocently types the wrong task number in \u003ccode\u003eFixes XXX\u003c/code\u003e, and a task they can\u0026#39;t see gets closed).\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;m \u003cem\u003einclined\u003c/em\u003e to continue letting commits we can\u0026#39;t attribute to an author close anything, since malicious interaction through this mechanism seems less pretty low-impact, but it\u0026#39;s nice if \u003ccode\u003eFixes XXX\u003c/code\u003e works when you\u0026#39;re first setting things up even if your email/author strings aren\u0026#39;t all sorted out yet.\u003c/p\u003e\n\n\u003cp\u003eIn the context of your own install, would that be a satisfactory fix? Did you run into this because someone made an innocent mistake with the wrong \u003ccode\u003eFixes XXX\u003c/code\u003e, but had author information configured correctly so that this rule would have prevented this mistake?\u003c/p\u003e\n\n\u003cp\u003eSome stronger rules I can imagine are:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eUnattributed commits can\u0026#39;t affect anything. I think this is reasonable, but worry it might make the new user experience worse to fix a tiny/mostly theoretical issue with very little meaningful impact.\u003c/li\u003e\n\u003cli\u003eUnattributed commits can\u0026#39;t affect things outside the default space. I don\u0026#39;t like this because it\u0026#39;s weird magic that makes the policy system more complicated with an unintuitive one-off rule.\u003c/li\u003e\n\u003cli\u003eRepositories (or an entire install) can be configured so that unattributed commits can\u0026#39;t affect anything. If it\u0026#39;s per-repository, this doesn\u0026#39;t help with the case where Eve can create her own repository. I tend not to like this because options/settings have a high cost and I think the benefit here is very low (see also: \u003ca title=\"https://secure.phabricator.com/T8227\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FT8227\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/T8227\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e).\u003c/li\u003e\n\u003cli\u003eRepositories (or an entre install) can be configured to require GPG signatures, and only act with authority if they\u0026#39;re present. I think this is the best actual fix but I can\u0026#39;t imagine anyone ever going to this trouble just to prevent this. This would be more reasonable if we had a stronger set of arguments and use cases for trying to support GPG or some other signing mechanism more broadly.\u003c/li\u003e\n\u003cli\u003eWe could alternatively work to try to implicitly establish authority through other channels. For example, \u003ccode\u003earc land\u003c/code\u003e could make an authorized call to Phabricator and say \u0026quot;I\u0026#39;m Alice, and I\u0026#39;m pushing these commits, so if you later see them and they say they\u0026#39;re from me, that\u0026#39;s legitimate\u0026quot;. This would possibly let us get some of the benefits of GPG without requiring everyone to configure GPG.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eFor now, my inclination is to add the advisory/guard-rail rule (\u0026quot;if commit X is attributed to author A, it can\u0026#39;t affect tasks that author A doesn\u0026#39;t have permission to see and edit\u0026quot;), but not meaningfully try to defuse the \u0026quot;attack\u0026quot; part of this where Eve intentionally impersonates Alice.\u003c/p\u003e\n\n\u003cp\u003eI don\u0026#39;t think GPG or other side-channel authorization are unreasonable, they\u0026#39;re currently just a lot of work for both the upstream and users for not much benefit. If/when we have more/better reasons to build them, we could integrate them here at that time.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-14T11:43:35.054Z","updated_at":"2017-04-14T11:43:35.054Z","actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1611400,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Here's an upstream change to implement the \"guard rail\" rule:\n\n\u003e If we identify the author of a commit as user X, that commit can only affect tasks which user X can see and edit.\n\nhttps://secure.phabricator.com/D17688","markdown_message":"\u003cp\u003eHere\u0026#39;s an upstream change to implement the \u0026quot;guard rail\u0026quot; rule:\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eIf we identify the author of a commit as user X, that commit can only affect tasks which user X can see and edit.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca title=\"https://secure.phabricator.com/D17688\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FD17688\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/D17688\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-14T12:41:33.921Z","updated_at":"2017-04-14T12:41:33.921Z","actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1611608,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"The improvement above is now available at `HEAD` of `master`, and should promote to `stable` within the next 12 hours:\n\nhttps://secure.phabricator.com/rP1e43d57c81252c4921d1999db9423a7232ed5976","markdown_message":"\u003cp\u003eThe improvement above is now available at \u003ccode\u003eHEAD\u003c/code\u003e of \u003ccode\u003emaster\u003c/code\u003e, and should promote to \u003ccode\u003estable\u003c/code\u003e within the next 12 hours:\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://secure.phabricator.com/rP1e43d57c81252c4921d1999db9423a7232ed5976\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FrP1e43d57c81252c4921d1999db9423a7232ed5976\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/rP1e43d57c81252c4921d1999db9423a7232ed5976\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-14T15:07:08.431Z","updated_at":"2017-04-14T15:07:08.431Z","actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1612796,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks, yes, this would have worked in the context of my install. In the one specific case it was an innocent mistake by a user who did have properly configured author information​, and in general the teams on my install aren't maliciously attacking each other.\n\nSorry for the delay in writing back; I had to think long and hard about everything you wrote. You weren't kidding when you said it's a little tricky!\n\nMy initial idea was in fact to look at the pusher's identity because 1) as you mentioned, the pusher's information can't be missing or faked, and 2) before pushing any commits authored by other people, the pusher would have (or should have) reviewed the commits, including making sure there weren't any sneaky autocloses. But I also understand that in workflows where, say, a small number of dedicated accounts push commits on behalf of developers, we'd still run into the same issues of how to decide which pushers should be able to close what tasks, and how those pushers (which could be bot accounts or understaffed build engineers) can possibly be expected to check the legitimacy of every autoclose commit message.\n\nSo now I agree with you, ultimately it's the author that writes the commit message that triggers autoclose, so it has to be the author that's trusted or not. On that note, though, wouldn't the `arc land` side channel still be relying on the pusher's identity?\n\nYou mentioned that this isn't foolproof since author info can be spoofed. Since that's a problem faced by distributed revision control in general, and having committers sign their commits is a (or the?) recognized solution, I also agree that requiring signatures is a good solution to implement in the future if needed.\n\nI'm still a little wary of having permissive behavior be the default when the author can't be identified. Of course, this goes away if Phabricator ever starts requiring signed commits. Barring that, though, I actually lean toward the first stronger rule that you mentioned, \"unattributed commits can't affect anything.\" To mitigate worsening the new user experience, could autoclose say something like \"I saw that this commit wanted to autoclose stuff, and I would have done it, but I couldn't recognize the author\"? For example, have the Autoclose status in Edit Commit say \"Yes, but author not recognized,\" or have the commit's activity feed say \"Diffusion didn't recognize the author, so refused to add a task: TXXX\"?\n\nRegarding the second rule you mentioned, \"unattributed commits can't affect things outside the default space\": originally I would have suggested a slightly different rule, \"commits in a space can't affect things in a different space\" because in my mental model, spaces were supposed to act as strict containers/boundaries. I now realize that spaces never claimed to do that. A lot of users on my install, including me, came in with a \"containers\" mindset, so it was surprising that using a restricted space didn't prevent Eve from autoclosing. But this one's easy, I can just educate the users on my install.","markdown_message":"\u003cp\u003eThanks, yes, this would have worked in the context of my install. In the one specific case it was an innocent mistake by a user who did have properly configured author information​, and in general the teams on my install aren\u0026#39;t maliciously attacking each other.\u003c/p\u003e\n\n\u003cp\u003eSorry for the delay in writing back; I had to think long and hard about everything you wrote. You weren\u0026#39;t kidding when you said it\u0026#39;s a little tricky!\u003c/p\u003e\n\n\u003cp\u003eMy initial idea was in fact to look at the pusher\u0026#39;s identity because 1) as you mentioned, the pusher\u0026#39;s information can\u0026#39;t be missing or faked, and 2) before pushing any commits authored by other people, the pusher would have (or should have) reviewed the commits, including making sure there weren\u0026#39;t any sneaky autocloses. But I also understand that in workflows where, say, a small number of dedicated accounts push commits on behalf of developers, we\u0026#39;d still run into the same issues of how to decide which pushers should be able to close what tasks, and how those pushers (which could be bot accounts or understaffed build engineers) can possibly be expected to check the legitimacy of every autoclose commit message.\u003c/p\u003e\n\n\u003cp\u003eSo now I agree with you, ultimately it\u0026#39;s the author that writes the commit message that triggers autoclose, so it has to be the author that\u0026#39;s trusted or not. On that note, though, wouldn\u0026#39;t the \u003ccode\u003earc land\u003c/code\u003e side channel still be relying on the pusher\u0026#39;s identity?\u003c/p\u003e\n\n\u003cp\u003eYou mentioned that this isn\u0026#39;t foolproof since author info can be spoofed. Since that\u0026#39;s a problem faced by distributed revision control in general, and having committers sign their commits is a (or the?) recognized solution, I also agree that requiring signatures is a good solution to implement in the future if needed.\u003c/p\u003e\n\n\u003cp\u003eI\u0026#39;m still a little wary of having permissive behavior be the default when the author can\u0026#39;t be identified. Of course, this goes away if Phabricator ever starts requiring signed commits. Barring that, though, I actually lean toward the first stronger rule that you mentioned, \u0026quot;unattributed commits can\u0026#39;t affect anything.\u0026quot; To mitigate worsening the new user experience, could autoclose say something like \u0026quot;I saw that this commit wanted to autoclose stuff, and I would have done it, but I couldn\u0026#39;t recognize the author\u0026quot;? For example, have the Autoclose status in Edit Commit say \u0026quot;Yes, but author not recognized,\u0026quot; or have the commit\u0026#39;s activity feed say \u0026quot;Diffusion didn\u0026#39;t recognize the author, so refused to add a task: TXXX\u0026quot;?\u003c/p\u003e\n\n\u003cp\u003eRegarding the second rule you mentioned, \u0026quot;unattributed commits can\u0026#39;t affect things outside the default space\u0026quot;: originally I would have suggested a slightly different rule, \u0026quot;commits in a space can\u0026#39;t affect things in a different space\u0026quot; because in my mental model, spaces were supposed to act as strict containers/boundaries. I now realize that spaces never claimed to do that. A lot of users on my install, including me, came in with a \u0026quot;containers\u0026quot; mindset, so it was surprising that using a restricted space didn\u0026#39;t prevent Eve from autoclosing. But this one\u0026#39;s easy, I can just educate the users on my install.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-15T05:12:50.547Z","updated_at":"2017-04-15T05:12:50.547Z","actor":{"username":"almanac","cleared":false,"url":"/almanac","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1613048,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e On that note, though, wouldn't the arc land side channel still be relying on the pusher's identity?\n\nYeah, we'd be limited in what we could do with this: the authority granted by the pusher's identity could be extended to repositories we observe (not just host), provided they were being pushed with `arc land`. This would only be good for implementing the rule \"Alice pushed commit X, so if commit X claims to be authored by Alice, that authorship is authentic\". That would catch a lot of common cases, but still leave a lot of other reasonable cases out in the cold.\n\nThere are other side channels available, at least in theory, which could improve coverage here. For example, if Alice clicks \"Land Revision\" on a revision that Bailey authored, we can trust that both are authentic and that the action is permissible because \"Land Revision\" obeys review rules.\n\nThis currently is a long road through unmapped territory, and not something that makes sense to try to pursue in the short term. But I could imagine that we might start building this mechanism eventually.\n\n\u003e \"I saw that this commit wanted to autoclose stuff, and I would have done it, but I couldn't recognize the author\"\n\nCurrently, we somewhat often see confusion around how branch/ref tracking and autoclose work and why things were or weren't autoclosed despite all the hinting. This isn't the best example -- just the most recent public one that springs to mind -- but here's a somewhat-recent case where a user manually changed the repository \"Autoclose\" setting to \"Disabled\", and was then confused that the UI said `Autoclose: Disabled`:\n\n\u003chttps://secure.phabricator.com/T12051\u003e\n\nThese issues can largely be fixed or improved, but some of them are very complicated (like \u003chttps://secure.phabricator.com/T11314\u003e).\n\nThis part of the product broadly feels like it has too much complexity for many users right now and represents a stumbling block in adopting and using Phabricator. I'd like to avoid adding *more* complexity until we have these difficulties under control when the value is marginal, and I think this case is not *really* a security issue and probably not terribly likely to cause much product confusion either, since users who have learned about `Fixes` (which is a relatively more-advanced feature) have probably also configured commit authorship to work right (which is a relatively less-advanced feature).\n\n(The \"Explain Why\" tools are also partly to help help *us* debug things when users come to us for support: users still get confused, but now we can say \"can you take a screenshot of 'Explain Why' and show me?\" and then walk them through things from there instead of saying \"can you run all these weird commands from the command line?\".)\n\nIf we did add this message, it's also very hard for users to *fix* it, especially until we implement this:\n\n\u003chttps://secure.phabricator.com/T12164\u003e\n\nWhen we give users an error with no next steps or obvious way to resolve it, that can be a pretty negative experience. Either they can't fix the problem, or they have to come ask us for help. Today, the \"next steps\" would be very involved and require CLI access. After T12164, they could be far more reasonable.\n\nI generally agree that the proposed behavior is conceptually better in some sense -- maybe \"more pure\" -- but I think we have a lot of sort of \"product debt\" in this area of the product right now: things that are too complicated and too hard to use, and need work to simplify them and explain them better.\n\nI think this is something that makes sense to keep in mind, and maybe revisit in the future when we have a better handle on product complexity here, but the benefit seems very small to me and not worth the additional complexity at the present time.\n\nIf you wanted to implement this behavior locally (albeit without the hinting) you could do so like this:\n\n```diff\ndiff --git a/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php b/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php\nindex 767cfe5290..f8ceb06839 100644\n--- a/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php\n+++ b/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php\n@@ -304,6 +304,8 @@ abstract class PhabricatorRepositoryCommitMessageParserWorker\n     // make behavior less confusing for new installs.\n \n     if (!$acting_user) {\n+      // LOCAL PATCH: When a commit is unattributed, don't affect tasks.\n+      return;\n       $acting_user = $actor;\n     }\n```\n\nAnother consideration here is that I didn't touch Differential behaviors, which still use the old rules. I think this is basically fine because it's almost impossible to commit a change with `Differential Revision: XXX` by mistake where `XXX` is some hidden resource, but probably worth considering if we try to make this more formal in the future.\n\nBroadly, see also here for a general overview of roadmap and complexity concerns in this area of the product:\n\n\u003chttps://secure.phabricator.com/T12010\u003e\n\nUpshot:\n\n  - I agree that disempowering unattributed commits is conceptually better in some sense, but think it would harm users on the balance today by adding more complexity than value. If we have more headroom and support in the product in the future I'd consider adopting a stricter rule, but don't plan to adopt one for now.\n  - At some point in the future we may implement signing support or side channels or other audit/identity features in this vein. If we do, revisiting this behavior would make sense. But this is very complicated and doesn't motivate other improvements today, so I don't plan to pursue it until we build a stronger case for it.","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eOn that note, though, wouldn\u0026#39;t the arc land side channel still be relying on the pusher\u0026#39;s identity?\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eYeah, we\u0026#39;d be limited in what we could do with this: the authority granted by the pusher\u0026#39;s identity could be extended to repositories we observe (not just host), provided they were being pushed with \u003ccode\u003earc land\u003c/code\u003e. This would only be good for implementing the rule \u0026quot;Alice pushed commit X, so if commit X claims to be authored by Alice, that authorship is authentic\u0026quot;. That would catch a lot of common cases, but still leave a lot of other reasonable cases out in the cold.\u003c/p\u003e\n\n\u003cp\u003eThere are other side channels available, at least in theory, which could improve coverage here. For example, if Alice clicks \u0026quot;Land Revision\u0026quot; on a revision that Bailey authored, we can trust that both are authentic and that the action is permissible because \u0026quot;Land Revision\u0026quot; obeys review rules.\u003c/p\u003e\n\n\u003cp\u003eThis currently is a long road through unmapped territory, and not something that makes sense to try to pursue in the short term. But I could imagine that we might start building this mechanism eventually.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u0026quot;I saw that this commit wanted to autoclose stuff, and I would have done it, but I couldn\u0026#39;t recognize the author\u0026quot;\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eCurrently, we somewhat often see confusion around how branch/ref tracking and autoclose work and why things were or weren\u0026#39;t autoclosed despite all the hinting. This isn\u0026#39;t the best example -- just the most recent public one that springs to mind -- but here\u0026#39;s a somewhat-recent case where a user manually changed the repository \u0026quot;Autoclose\u0026quot; setting to \u0026quot;Disabled\u0026quot;, and was then confused that the UI said \u003ccode\u003eAutoclose: Disabled\u003c/code\u003e:\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://secure.phabricator.com/T12051\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FT12051\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/T12051\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eThese issues can largely be fixed or improved, but some of them are very complicated (like \u003ca title=\"https://secure.phabricator.com/T11314\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FT11314\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/T11314\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e).\u003c/p\u003e\n\n\u003cp\u003eThis part of the product broadly feels like it has too much complexity for many users right now and represents a stumbling block in adopting and using Phabricator. I\u0026#39;d like to avoid adding \u003cem\u003emore\u003c/em\u003e complexity until we have these difficulties under control when the value is marginal, and I think this case is not \u003cem\u003ereally\u003c/em\u003e a security issue and probably not terribly likely to cause much product confusion either, since users who have learned about \u003ccode\u003eFixes\u003c/code\u003e (which is a relatively more-advanced feature) have probably also configured commit authorship to work right (which is a relatively less-advanced feature).\u003c/p\u003e\n\n\u003cp\u003e(The \u0026quot;Explain Why\u0026quot; tools are also partly to help help \u003cem\u003eus\u003c/em\u003e debug things when users come to us for support: users still get confused, but now we can say \u0026quot;can you take a screenshot of \u0026#39;Explain Why\u0026#39; and show me?\u0026quot; and then walk them through things from there instead of saying \u0026quot;can you run all these weird commands from the command line?\u0026quot;.)\u003c/p\u003e\n\n\u003cp\u003eIf we did add this message, it\u0026#39;s also very hard for users to \u003cem\u003efix\u003c/em\u003e it, especially until we implement this:\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://secure.phabricator.com/T12164\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FT12164\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/T12164\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eWhen we give users an error with no next steps or obvious way to resolve it, that can be a pretty negative experience. Either they can\u0026#39;t fix the problem, or they have to come ask us for help. Today, the \u0026quot;next steps\u0026quot; would be very involved and require CLI access. After T12164, they could be far more reasonable.\u003c/p\u003e\n\n\u003cp\u003eI generally agree that the proposed behavior is conceptually better in some sense -- maybe \u0026quot;more pure\u0026quot; -- but I think we have a lot of sort of \u0026quot;product debt\u0026quot; in this area of the product right now: things that are too complicated and too hard to use, and need work to simplify them and explain them better.\u003c/p\u003e\n\n\u003cp\u003eI think this is something that makes sense to keep in mind, and maybe revisit in the future when we have a better handle on product complexity here, but the benefit seems very small to me and not worth the additional complexity at the present time.\u003c/p\u003e\n\n\u003cp\u003eIf you wanted to implement this behavior locally (albeit without the hinting) you could do so like this:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight diff\"\u003e\u003ccode\u003e\u003cspan class=\"gh\"\u003ediff --git a/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php b/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php\nindex 767cfe5290..f8ceb06839 100644\n\u003c/span\u003e\u003cspan class=\"gd\"\u003e--- a/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+++ b/src/applications/repository/worker/commitmessageparser/PhabricatorRepositoryCommitMessageParserWorker.php\n\u003c/span\u003e\u003cspan class=\"p\"\u003e@@ -304,6 +304,8 @@\u003c/span\u003e abstract class PhabricatorRepositoryCommitMessageParserWorker\n     // make behavior less confusing for new installs.\n\n     if (!$acting_user) {\n\u003cspan class=\"gi\"\u003e+      // LOCAL PATCH: When a commit is unattributed, don\u0026#39;t affect tasks.\n+      return;\n\u003c/span\u003e       $acting_user = $actor;\n     }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnother consideration here is that I didn\u0026#39;t touch Differential behaviors, which still use the old rules. I think this is basically fine because it\u0026#39;s almost impossible to commit a change with \u003ccode\u003eDifferential Revision: XXX\u003c/code\u003e by mistake where \u003ccode\u003eXXX\u003c/code\u003e is some hidden resource, but probably worth considering if we try to make this more formal in the future.\u003c/p\u003e\n\n\u003cp\u003eBroadly, see also here for a general overview of roadmap and complexity concerns in this area of the product:\u003c/p\u003e\n\n\u003cp\u003e\u003ca title=\"https://secure.phabricator.com/T12010\" href=\"/redirect?url=https%3A%2F%2Fsecure.phabricator.com%2FT12010\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://secure.phabricator.com/T12010\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eUpshot:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eI agree that disempowering unattributed commits is conceptually better in some sense, but think it would harm users on the balance today by adding more complexity than value. If we have more headroom and support in the product in the future I\u0026#39;d consider adopting a stricter rule, but don\u0026#39;t plan to adopt one for now.\u003c/li\u003e\n\u003cli\u003eAt some point in the future we may implement signing support or side channels or other audit/identity features in this vein. If we do, revisiting this behavior would make sense. But this is very complicated and doesn\u0026#39;t motivate other improvements today, so I don\u0026#39;t plan to pursue it until we build a stronger case for it.\u003c/li\u003e\n\u003c/ul\u003e\n","automated_response":false,"created_at":"2017-04-15T12:06:53.573Z","updated_at":"2017-04-15T12:06:53.573Z","actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1613049,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"I believe we've resolved this as thoroughly as we can today, considering the balance of product complexity concerns. This resolution isn't completely satisfactory, but I think all the ways forward from here require significant additional application/product support which is likely far in the future.","markdown_message":"\u003cp\u003eI believe we\u0026#39;ve resolved this as thoroughly as we can today, considering the balance of product complexity concerns. This resolution isn\u0026#39;t completely satisfactory, but I think all the ways forward from here require significant additional application/product support which is likely far in the future.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-15T12:09:43.092Z","updated_at":"2017-04-15T12:09:43.092Z","actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"almanac","url":"/almanac"},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1613050,"is_internal":false,"editable":false,"type":"Activities::NotEligibleForBounty","message":"I'm not awarding a bounty for this report because I think it didn't quite rise to the level of a real security issue. It was still an informative and useful report, and we were happy to receive it, and reporting it on this channel was appropriate because of the borderline nature of the behavior.","markdown_message":"\u003cp\u003eI\u0026#39;m not awarding a bounty for this report because I think it didn\u0026#39;t quite rise to the level of a real security issue. It was still an informative and useful report, and we were happy to receive it, and reporting it on this channel was appropriate because of the borderline nature of the behavior.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-15T12:12:53.158Z","updated_at":"2017-04-15T12:12:53.158Z","actor":{"url":"/phabricator","ibb":true,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/018/61446f7e6f0684c8c9f7c36c918b7ecd58183588_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"Phabricator"}},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1613051,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"This can be disclosed at any time, as substantially similar discussion is publicly available in the upstream commit history and changelog.","markdown_message":"\u003cp\u003eThis can be disclosed at any time, as substantially similar discussion is publicly available in the upstream commit history and changelog.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-15T12:13:35.479Z","updated_at":"2017-04-15T12:13:35.479Z","first_to_agree":true,"actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1613055,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks for the report! Please let us know if you run into anything else in the future.\n\nThis resolution feels a little unsatisfactory but I think it's about the best we can do today. I'll keep this in mind in the future.\n\n(I remain open to discussing this further if you have other ideas here, or to awarding a bounty if you can construct a realistic attack scenario where an attacker does more than annoy co-workers while leaving an audit trail a mile wide and then immediately being fired, I'm just erring on the side of resolving this since I don't see any clear next steps.)","markdown_message":"\u003cp\u003eThanks for the report! Please let us know if you run into anything else in the future.\u003c/p\u003e\n\n\u003cp\u003eThis resolution feels a little unsatisfactory but I think it\u0026#39;s about the best we can do today. I\u0026#39;ll keep this in mind in the future.\u003c/p\u003e\n\n\u003cp\u003e(I remain open to discussing this further if you have other ideas here, or to awarding a bounty if you can construct a realistic attack scenario where an attacker does more than annoy co-workers while leaving an audit trail a mile wide and then immediately being fired, I\u0026#39;m just erring on the side of resolving this since I don\u0026#39;t see any clear next steps.)\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-15T12:18:39.199Z","updated_at":"2017-04-15T12:18:39.199Z","actor":{"username":"epriestley","cleared":false,"url":"/epriestley","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/043/3ebca5250ea5abd54b49ccc9d69c636af4585b2e_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1629410,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"\u003e If we did add this message, it's also very hard for users to *fix* it\n\nYeah, I hadn't considered that. I had imagined a user would just fix their author info and then `commit --amend` or push a new commit on top. But if they'd never run into this issue before, they wouldn't even know that that was a possible solution unless the autoclose status message were pretty wordy. And that solution still wouldn't be as nice as T12164.\n\n\u003e I believe we've resolved this as thoroughly as we can today, considering the balance of product complexity concerns. \n\nI'm fine with the outcome since you of course have a much clearer view of how this issue fits into Phabricator's design and whatever upcoming changes you're planning (we all eagerly await!). And as always, you addressed the issue uncannily fast, so thanks for that, too.\n\n\u003e awarding a bounty if you can construct a realistic attack scenario where an attacker does more than annoy co-workers while leaving an audit trail a mile wide and then immediately being fired\n\nNope, I didn't think this was a security vulnerability or deserved a bounty. My apologies to HackerOne for not quite using the platform for what it was meant for.\n\nThanks!","markdown_message":"\u003cblockquote\u003e\n\u003cp\u003eIf we did add this message, it\u0026#39;s also very hard for users to \u003cem\u003efix\u003c/em\u003e it\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eYeah, I hadn\u0026#39;t considered that. I had imagined a user would just fix their author info and then \u003ccode\u003ecommit --amend\u003c/code\u003e or push a new commit on top. But if they\u0026#39;d never run into this issue before, they wouldn\u0026#39;t even know that that was a possible solution unless the autoclose status message were pretty wordy. And that solution still wouldn\u0026#39;t be as nice as T12164.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eI believe we\u0026#39;ve resolved this as thoroughly as we can today, considering the balance of product complexity concerns. \u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eI\u0026#39;m fine with the outcome since you of course have a much clearer view of how this issue fits into Phabricator\u0026#39;s design and whatever upcoming changes you\u0026#39;re planning (we all eagerly await!). And as always, you addressed the issue uncannily fast, so thanks for that, too.\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eawarding a bounty if you can construct a realistic attack scenario where an attacker does more than annoy co-workers while leaving an audit trail a mile wide and then immediately being fired\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eNope, I didn\u0026#39;t think this was a security vulnerability or deserved a bounty. My apologies to HackerOne for not quite using the platform for what it was meant for.\u003c/p\u003e\n\n\u003cp\u003eThanks!\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-24T04:20:00.898Z","updated_at":"2017-04-24T04:20:00.898Z","actor":{"username":"almanac","cleared":false,"url":"/almanac","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1629412,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-04-24T04:20:25.115Z","updated_at":"2017-04-24T04:20:25.115Z","actor":{"username":"almanac","cleared":false,"url":"/almanac","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1629413,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-04-24T04:20:25.164Z","updated_at":"2017-04-24T04:20:25.164Z","actor":{"username":"almanac","cleared":false,"url":"/almanac","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"phabricator","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}