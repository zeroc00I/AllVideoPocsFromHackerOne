{"id":7921,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC83OTIx","url":"https://hackerone.com/reports/7921","title":"Assigning a non-existing role to user causes exception when opening project page","state":"Closed","substate":"resolved","readable_substate":"Resolved","created_at":"2014-04-17T20:28:01.081Z","submitted_at":"2014-04-17T20:28:01.081Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"jackds","url":"/jackds","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/002/975/99b380468b2f9d3b8f03ecf5c652585a082c2ec5_original.jpg/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":true,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":152,"url":"https://hackerone.com/localize","handle":"localize","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/000/152/56094bdec916edb0ca63cd7533e4c556e900dde0_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/000/152/56094bdec916edb0ca63cd7533e4c556e900dde0_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"disabled","default_currency":"usd","awards_miles":false,"offers_bounties":false,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Localize","twitter_handle":null,"website":"https://www.localize.im/","about":"The free platform for the translation of Android apps"}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2014-04-19T11:20:36.009Z","bug_reporter_agreed_on_going_public_at":"2014-04-19T11:20:35.940Z","team_member_agreed_on_going_public_at":"2014-04-18T03:13:29.468Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"Reproduction:\r\n\r\n- Create a new private project\r\n- Log in as another user and go the the newly create project page. Request access there.\r\n- Switch back to original user and check pending requests.\r\n- At this point I was able to assign a non-existing role (I changed the dropdown list and chose 10 as value). Grant user access then.\r\n- Log in again a the user that requested access. The dashboard indicates that the request was accepted. \r\n- Click on the project. The following error is given:\r\n\r\nFatal error: Uncaught exception 'Exception' with message 'Unknown role 10' in /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/Repository.php:358 Stack trace: #0 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/UI.php(1136): RepositoryPermissions-\u003eisInvitationMissing() #1 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/UI.php(204): UI::getPage_Project(Array, Array) #2 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/UI.php(179): UI::findPage(6, Array, Array) #3 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/index.php(158): UI::getPage(6) #4 {main} thrown in /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/Repository.php on line 358","vulnerability_information_html":"\u003cp\u003eReproduction:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eCreate a new private project\u003c/li\u003e\n\u003cli\u003eLog in as another user and go the the newly create project page. Request access there.\u003c/li\u003e\n\u003cli\u003eSwitch back to original user and check pending requests.\u003c/li\u003e\n\u003cli\u003eAt this point I was able to assign a non-existing role (I changed the dropdown list and chose 10 as value). Grant user access then.\u003c/li\u003e\n\u003cli\u003eLog in again a the user that requested access. The dashboard indicates that the request was accepted. \u003c/li\u003e\n\u003cli\u003eClick on the project. The following error is given:\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eFatal error: Uncaught exception \u0026#39;Exception\u0026#39; with message \u0026#39;Unknown role 10\u0026#39; in /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/Repository.php:358 Stack trace: #0 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/UI.php(1136): RepositoryPermissions-\u0026gt;isInvitationMissing() #1 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/UI.php(204): UI::getPage_Project(Array, Array) #2 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/UI.php(179): UI::findPage(6, Array, Array) #3 /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/index.php(158): UI::getPage(6) #4 {main} thrown in /var/www/vhosts/lvps178-77-99-228.dedicated.hosteurope.de/httpdocs_localize/classes/Repository.php on line 358\u003c/p\u003e\n","weakness":{"id":48,"name":"Denial of Service"},"original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2014-05-18T03:13:22.914Z","allow_singular_disclosure_after":-208842033.2676415,"singular_disclosure_allowed":true,"vote_count":1,"voters":["spetr0x"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":32321,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"We have checked this issue and verified it as a valid bug which is in scope.\n\nThe problem has now been fixed. Thank you!","markdown_message":"\u003cp\u003eWe have checked this issue and verified it as a valid bug which is in scope.\u003c/p\u003e\n\n\u003cp\u003eThe problem has now been fixed. Thank you!\u003c/p\u003e\n","automated_response":false,"created_at":"2014-04-18T03:13:22.991Z","updated_at":"2014-04-18T03:13:22.991Z","actor":{"username":"delight-im","cleared":false,"url":"/delight-im","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"jackds","url":"/jackds"},"genius_execution_id":null,"team_handle":"localize","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":32322,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2014-04-18T03:13:29.515Z","updated_at":"2014-04-18T03:13:29.515Z","first_to_agree":true,"actor":{"username":"delight-im","cleared":false,"url":"/delight-im","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"localize","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":32541,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Agree to disclose","markdown_message":"\u003cp\u003eAgree to disclose\u003c/p\u003e\n","automated_response":false,"created_at":"2014-04-18T11:02:10.021Z","updated_at":"2014-04-18T11:02:10.021Z","actor":{"username":"jackds","cleared":true,"url":"/jackds","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/002/975/99b380468b2f9d3b8f03ecf5c652585a082c2ec5_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"localize","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":32751,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"You have to click \"Agree to disclose\" (or similar) somewhere on the page. It's probably in the drop-down list that says \"Add comment\" by default. Can you find it?","markdown_message":"\u003cp\u003eYou have to click \u0026quot;Agree to disclose\u0026quot; (or similar) somewhere on the page. It\u0026#39;s probably in the drop-down list that says \u0026quot;Add comment\u0026quot; by default. Can you find it?\u003c/p\u003e\n","automated_response":false,"created_at":"2014-04-18T18:36:24.797Z","updated_at":"2014-04-18T18:36:24.797Z","actor":{"username":"delight-im","cleared":false,"url":"/delight-im","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"localize","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":33155,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2014-04-19T11:20:35.955Z","updated_at":"2014-04-19T11:20:35.955Z","actor":{"username":"jackds","cleared":true,"url":"/jackds","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/002/975/99b380468b2f9d3b8f03ecf5c652585a082c2ec5_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"localize","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":33156,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","markdown_message":"","automated_response":false,"created_at":"2014-04-19T11:20:36.023Z","updated_at":"2014-04-19T11:20:36.023Z","actor":{"username":"jackds","cleared":true,"url":"/jackds","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/002/975/99b380468b2f9d3b8f03ecf5c652585a082c2ec5_original.jpg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"localize","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}